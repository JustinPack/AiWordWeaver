{"version":3,"sources":["..\\..\\electron\\preload\\index.ts"],"sourcesContent":["function domReady(condition: DocumentReadyState[] = ['complete', 'interactive']) {\r\n  return new Promise(resolve => {\r\n    if (condition.includes(document.readyState)) {\r\n      resolve(true)\r\n    } else {\r\n      document.addEventListener('readystatechange', () => {\r\n        if (condition.includes(document.readyState)) {\r\n          resolve(true)\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst safeDOM = {\r\n  append(parent: HTMLElement, child: HTMLElement) {\r\n    if (!Array.from(parent.children).find(e => e === child)) {\r\n      return parent.appendChild(child)\r\n    }\r\n  },\r\n  remove(parent: HTMLElement, child: HTMLElement) {\r\n    if (Array.from(parent.children).find(e => e === child)) {\r\n      return parent.removeChild(child)\r\n    }\r\n  },\r\n}\r\n\r\n/**\r\n * https://tobiasahlin.com/spinkit\r\n * https://connoratherton.com/loaders\r\n * https://projects.lukehaas.me/css-loaders\r\n * https://matejkustec.github.io/SpinThatShit\r\n */\r\nfunction useLoading() {\r\n  const className = `loaders-css__square-spin`\r\n  const styleContent = `\r\n@keyframes square-spin {\r\n  25% { transform: perspective(100px) rotateX(180deg) rotateY(0); }\r\n  50% { transform: perspective(100px) rotateX(180deg) rotateY(180deg); }\r\n  75% { transform: perspective(100px) rotateX(0) rotateY(180deg); }\r\n  100% { transform: perspective(100px) rotateX(0) rotateY(0); }\r\n}\r\n.${className} > div {\r\n  animation-fill-mode: both;\r\n  width: 50px;\r\n  height: 50px;\r\n  background: #fff;\r\n  animation: square-spin 3s 0s cubic-bezier(0.09, 0.57, 0.49, 0.9) infinite;\r\n}\r\n.app-loading-wrap {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #282c34;\r\n  z-index: 9;\r\n}\r\n    `\r\n  const oStyle = document.createElement('style')\r\n  const oDiv = document.createElement('div')\r\n\r\n  oStyle.id = 'app-loading-style'\r\n  oStyle.innerHTML = styleContent\r\n  oDiv.className = 'app-loading-wrap'\r\n  oDiv.innerHTML = `<div class=\"${className}\"><div></div></div>`\r\n\r\n  return {\r\n    appendLoading() {\r\n      safeDOM.append(document.head, oStyle)\r\n      safeDOM.append(document.body, oDiv)\r\n    },\r\n    removeLoading() {\r\n      safeDOM.remove(document.head, oStyle)\r\n      safeDOM.remove(document.body, oDiv)\r\n    },\r\n  }\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst { appendLoading, removeLoading } = useLoading()\r\ndomReady().then(appendLoading)\r\n\r\nwindow.onmessage = (ev) => {\r\n  ev.data.payload === 'removeLoading' && removeLoading()\r\n}\r\n\r\nsetTimeout(removeLoading, 4999)"],"mappings":"AAAA,SAAS,SAAS,YAAkC,CAAC,YAAY,aAAa,GAAG;AAC/E,SAAO,IAAI,QAAQ,aAAW;AAC5B,QAAI,UAAU,SAAS,SAAS,UAAU,GAAG;AAC3C,cAAQ,IAAI;AAAA,IACd,OAAO;AACL,eAAS,iBAAiB,oBAAoB,MAAM;AAClD,YAAI,UAAU,SAAS,SAAS,UAAU,GAAG;AAC3C,kBAAQ,IAAI;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACH;AAEA,MAAM,UAAU;AAAA,EACd,OAAO,QAAqB,OAAoB;AAC9C,QAAI,CAAC,MAAM,KAAK,OAAO,QAAQ,EAAE,KAAK,OAAK,MAAM,KAAK,GAAG;AACvD,aAAO,OAAO,YAAY,KAAK;AAAA,IACjC;AAAA,EACF;AAAA,EACA,OAAO,QAAqB,OAAoB;AAC9C,QAAI,MAAM,KAAK,OAAO,QAAQ,EAAE,KAAK,OAAK,MAAM,KAAK,GAAG;AACtD,aAAO,OAAO,YAAY,KAAK;AAAA,IACjC;AAAA,EACF;AACF;AAQA,SAAS,aAAa;AACpB,QAAM,YAAY;AAClB,QAAM,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBD,QAAM,SAAS,SAAS,cAAc,OAAO;AAC7C,QAAM,OAAO,SAAS,cAAc,KAAK;AAEzC,SAAO,KAAK;AACZ,SAAO,YAAY;AACnB,OAAK,YAAY;AACjB,OAAK,YAAY,eAAe;AAEhC,SAAO;AAAA,IACL,gBAAgB;AACd,cAAQ,OAAO,SAAS,MAAM,MAAM;AACpC,cAAQ,OAAO,SAAS,MAAM,IAAI;AAAA,IACpC;AAAA,IACA,gBAAgB;AACd,cAAQ,OAAO,SAAS,MAAM,MAAM;AACpC,cAAQ,OAAO,SAAS,MAAM,IAAI;AAAA,IACpC;AAAA,EACF;AACF;AAIA,MAAM,EAAE,eAAe,cAAc,IAAI,WAAW;AACpD,SAAS,EAAE,KAAK,aAAa;AAE7B,OAAO,YAAY,CAAC,OAAO;AACzB,KAAG,KAAK,YAAY,mBAAmB,cAAc;AACvD;AAEA,WAAW,eAAe,IAAI;","names":[],"file":"index.js"}